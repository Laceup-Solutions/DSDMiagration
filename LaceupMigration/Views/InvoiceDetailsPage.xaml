<?xml version="1.0" encoding="utf-8" ?>
<local:LaceupContentPage xmlns:local="clr-namespace:LaceupMigration.Views" xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:LaceupMigration.ViewModels"
             x:Class="LaceupMigration.Views.InvoiceDetailsPage"
             xmlns:mi="http://www.aathifmahir.com/dotnet/2022/maui/icons"
             x:DataType="vm:InvoiceDetailsPageViewModel"
             Shell.NavBarIsVisible="True"
             Shell.TabBarIsVisible="False"
             Title="Invoice Details">
    <ContentPage.Content>
        <Grid RowDefinitions="Auto,*">
            <!-- Fixed Top Section -->
            <VerticalStackLayout Padding="10" Spacing="4" Grid.Row="0">
                <Label Text="{Binding ClientName}"
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryDark}" />

                <Label Text="{Binding CompanyName}"
                       IsVisible="{Binding ShowCompanyName}"
                       FontSize="14"
                       TextColor="{StaticResource Gray600}" />

                <Label Text="{Binding InvoiceNumberText}"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{StaticResource Gray900}" />

                <Label Text="{Binding TotalText}"
                       IsVisible="{Binding ShowTotal}"
                       FontSize="12"
                       TextColor="{StaticResource Gray900}" />

                <Label Text="{Binding DiscountText}"
                       IsVisible="{Binding ShowDiscount}"
                       FontSize="12"
                       TextColor="{StaticResource colorLaceupGreen}"
                       FontAttributes="Bold" />

                <Label Text="{Binding DatesText}"
                       FontSize="12"
                       TextColor="{StaticResource Gray600}" />

                <Label Text="{Binding SalesmanName}"
                       IsVisible="{Binding ShowSalesmanName}"
                       FontSize="12"
                       TextColor="{StaticResource Gray600}" />

                <Label Text="{Binding Comments}"
                       IsVisible="{Binding HasComments}"
                       FontSize="12"
                       TextColor="{StaticResource Gray600}" />

                <Label Text="Invoice Details"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryDark}"
                       Margin="0,20,0,10" />
            </VerticalStackLayout>

            <!-- Scrollable CollectionView -->
            <CollectionView ItemsSource="{Binding InvoiceDetails}"
                           Grid.Row="1"
                           Margin="10,0,10,10">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="vm:InvoiceDetailItemViewModel">
                        <Border Padding="12" Margin="0,0,0,8" StrokeShape="RoundRectangle 12" InputTransparent="True">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="{Binding ProductName}"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource Gray900}" />
                                
                                <Grid ColumnDefinitions="*,*" IsVisible="{Binding ShowPrice}">
                                    <Label Grid.Column="0"
                                           Text="{Binding QuantityText}"
                                           FontSize="12"
                                           TextColor="{StaticResource Gray600}" />
                                    <Label Grid.Column="1"
                                           Text="{Binding PriceText}"
                                           FontSize="12"
                                           TextColor="{StaticResource Gray900}"
                                           HorizontalOptions="End" />
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,*" IsVisible="{Binding ShowPrice}">
                                    <Label Grid.Column="0"
                                           Text="{Binding UoMText}"
                                           IsVisible="{Binding HasUoM}"
                                           FontSize="12"
                                           FontAttributes="Bold"
                                           TextColor="#FF8C00" />
                                    <Label Grid.Column="1"
                                           Text="{Binding TotalText}"
                                           FontSize="12"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource Gray900}"
                                           HorizontalOptions="End" />
                                </Grid>
                                
                                <Label Text="{Binding Notes}"
                                       IsVisible="{Binding HasNotes}"
                                       FontSize="12"
                                       TextColor="{StaticResource Gray600}"
                                       Margin="0,4,0,0" />
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ContentPage.Content>
</local:LaceupContentPage>

